"""
å·¥å…·ä½¿ç”¨ç¤ºä¾‹ï¼šæ·±å…¥ç†è§£ MCP å·¥å…·

è¿™ä¸ªç¤ºä¾‹ä¸“é—¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨å„ç§ MCP å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
1. æ¯ä¸ªå·¥å…·çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•
2. å‚æ•°é…ç½®å’Œé€‰é¡¹
3. æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹
4. å·¥å…·ç»„åˆä½¿ç”¨æŠ€å·§

å­¦ä¹ ç›®æ ‡ï¼š
1. æŒæ¡æ¯ä¸ªå·¥å…·çš„å…·ä½“ç”¨æ³•
2. äº†è§£å·¥å…·çš„å‚æ•°å’Œé€‰é¡¹
3. å­¦ä¼šå·¥å…·çš„æœ€ä½³å®è·µ
4. ç†è§£å·¥å…·ç»„åˆçš„å¨åŠ›
"""

import sys
import os
import json
import time
from datetime import datetime

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ° Python è·¯å¾„
project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.insert(0, project_root)

from src.config import config
from src.mcp_server import mcp_server
from src.langchain_client import langchain_client


def demo_file_tools():
    """æ¼”ç¤ºæ–‡ä»¶æ“ä½œå·¥å…·"""
    
    print("\n" + "="*60)
    print("ğŸ“ æ–‡ä»¶æ“ä½œå·¥å…·æ¼”ç¤º")
    print("="*60)
    
    print("\nğŸ”§ å·¥å…· 1: write_file - æ–‡ä»¶å†™å…¥")
    print("-" * 40)
    
    # åŸºç¡€æ–‡ä»¶å†™å…¥
    print("ğŸ”¸ åŸºç¡€ç”¨æ³•ï¼šåˆ›å»ºç®€å•æ–‡æœ¬æ–‡ä»¶")
    result = langchain_client.chat(
        "è¯·åˆ›å»ºä¸€ä¸ªåä¸º demo_basic.txt çš„æ–‡ä»¶ï¼Œå†…å®¹æ˜¯ 'Hello, MCP World!'"
    )
    print(f"æ‰§è¡Œç»“æœ: {result['output'][:100]}...")
    
    # å¤šè¡Œæ–‡ä»¶å†™å…¥
    print("\nğŸ”¸ è¿›é˜¶ç”¨æ³•ï¼šåˆ›å»ºå¤šè¡Œå†…å®¹æ–‡ä»¶")
    multi_line_content = """è¯·åˆ›å»ºä¸€ä¸ªåä¸º demo_multiline.txt çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
ç¬¬ä¸€è¡Œï¼šé¡¹ç›®æ ‡é¢˜
ç¬¬äºŒè¡Œï¼šä½œè€…ä¿¡æ¯
ç¬¬ä¸‰è¡Œï¼šåˆ›å»ºæ—¥æœŸ
ç¬¬å››è¡Œï¼šç‰ˆæœ¬å· 1.0"""
    
    result = langchain_client.chat(multi_line_content)
    print(f"æ‰§è¡Œç»“æœ: {result['output'][:100]}...")
    
    # JSON æ–‡ä»¶å†™å…¥
    print("\nğŸ”¸ ç‰¹æ®Šç”¨æ³•ï¼šåˆ›å»º JSON æ ¼å¼æ–‡ä»¶")
    json_content = """è¯·åˆ›å»ºä¸€ä¸ªåä¸º demo_config.json çš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
{
    "app_name": "MCP Demo",
    "version": "1.0.0",
    "debug": true,
    "features": ["file_ops", "calculations", "time_tools"]
}"""
    
    result = langchain_client.chat(json_content)
    print(f"æ‰§è¡Œç»“æœ: {result['output'][:100]}...")
    
    print("\nğŸ”§ å·¥å…· 2: read_file - æ–‡ä»¶è¯»å–")
    print("-" * 40)
    
    # è¯»å–åˆšåˆ›å»ºçš„æ–‡ä»¶
    files_to_read = ["demo_basic.txt", "demo_multiline.txt", "demo_config.json"]
    
    for filename in files_to_read:
        print(f"\nğŸ”¸ è¯»å–æ–‡ä»¶: {filename}")
        result = langchain_client.chat(f"è¯·è¯»å– {filename} æ–‡ä»¶çš„å†…å®¹")
        print(f"æ‰§è¡Œç»“æœ: {result['output'][:150]}...")
    
    print("\nğŸ”§ å·¥å…· 3: list_files - æ–‡ä»¶åˆ—è¡¨")
    print("-" * 40)
    
    print("ğŸ”¸ åˆ—å‡ºå½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶")
    result = langchain_client.chat("è¯·åˆ—å‡ºå·¥ä½œç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯")
    print(f"æ‰§è¡Œç»“æœ: {result['output'][:200]}...")
    
    # æ–‡ä»¶æ“ä½œæ€»ç»“
    print("\nğŸ’¡ æ–‡ä»¶å·¥å…·ä½¿ç”¨è¦ç‚¹ï¼š")
    print("   â€¢ write_file: æ”¯æŒä»»ä½•æ–‡æœ¬æ ¼å¼ï¼Œè‡ªåŠ¨åˆ›å»ºç›®å½•")
    print("   â€¢ read_file: è‡ªåŠ¨å¤„ç†ç¼–ç ï¼Œæ”¯æŒå¤§éƒ¨åˆ†æ–‡æœ¬æ–‡ä»¶")
    print("   â€¢ list_files: æä¾›è¯¦ç»†æ–‡ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¤§å°å’Œæ—¶é—´")


def demo_calculation_tools():
    """æ¼”ç¤ºè®¡ç®—å·¥å…·"""
    
    print("\n" + "="*60)
    print("ğŸ§® è®¡ç®—å·¥å…·æ¼”ç¤º")
    print("="*60)
    
    print("\nğŸ”§ å·¥å…· 1: calculate - æ•°å­¦è®¡ç®—")
    print("-" * 40)
    
    # åŸºç¡€å››åˆ™è¿ç®—
    basic_calculations = [
        "2 + 3",
        "10 - 4",
        "6 * 7",
        "15 / 3",
        "10 % 3"  # å–ä½™
    ]
    
    print("ğŸ”¸ åŸºç¡€å››åˆ™è¿ç®—ï¼š")
    for expr in basic_calculations:
        result = langchain_client.chat(f"è¯·è®¡ç®—ï¼š{expr}")
        print(f"   {expr} = {result['output'].split('=')[-1].strip() if '=' in result['output'] else 'è®¡ç®—ä¸­...'}")
    
    # å¤æ‚æ•°å­¦è¿ç®—
    complex_calculations = [
        "2**10",  # å¹‚è¿ç®—
        "(25 + 75) * 2",  # æ‹¬å·è¿ç®—
        "100 / (5 + 5)",  # åˆ†å¼è¿ç®—
        "3**2 + 4**2",  # å‹¾è‚¡å®šç†
        "((1 + 5**0.5) / 2)**2"  # é»„é‡‘æ¯”ä¾‹çš„å¹³æ–¹
    ]
    
    print("\nğŸ”¸ å¤æ‚æ•°å­¦è¿ç®—ï¼š")
    for expr in complex_calculations:
        result = langchain_client.chat(f"è¯·è®¡ç®—ï¼š{expr}")
        print(f"   {expr} çš„ç»“æœåœ¨è®¡ç®—ä¸­...")
    
    # æ•°å­¦å¸¸æ•°å’Œå‡½æ•°ï¼ˆå—é™ï¼‰
    print("\nğŸ”¸ æ•°å­¦åº”ç”¨ç¤ºä¾‹ï¼š")
    math_examples = [
        ("é¢ç§¯è®¡ç®—", "è®¡ç®—åŠå¾„ä¸º5çš„åœ†çš„é¢ç§¯ï¼š3.14159 * 5**2"),
        ("ä½“ç§¯è®¡ç®—", "è®¡ç®—è¾¹é•¿ä¸º3çš„ç«‹æ–¹ä½“ä½“ç§¯ï¼š3**3"),
        ("å¹³å‡å€¼", "è®¡ç®—è¿™äº›æ•°çš„å¹³å‡å€¼ï¼š(85 + 92 + 78 + 88 + 95) / 5")
    ]
    
    for name, expr in math_examples:
        print(f"\n   {name}:")
        result = langchain_client.chat(f"è¯·{expr}")
        print(f"   æ‰§è¡Œç»“æœ: {result['output'][:100]}...")
    
    print("\nğŸ”§ å·¥å…· 2: get_random_number - éšæœºæ•°ç”Ÿæˆ")
    print("-" * 40)
    
    # ä¸åŒèŒƒå›´çš„éšæœºæ•°
    random_examples = [
        ("æ ‡å‡†éšæœºæ•°", "ç”Ÿæˆä¸€ä¸ª 1 åˆ° 100 ä¹‹é—´çš„éšæœºæ•°"),
        ("å°èŒƒå›´éšæœºæ•°", "ç”Ÿæˆä¸€ä¸ª 1 åˆ° 10 ä¹‹é—´çš„éšæœºæ•°"),
        ("å¤§èŒƒå›´éšæœºæ•°", "ç”Ÿæˆä¸€ä¸ª 1000 åˆ° 9999 ä¹‹é—´çš„éšæœºæ•°"),
        ("éª°å­æ¨¡æ‹Ÿ", "ç”Ÿæˆä¸€ä¸ª 1 åˆ° 6 ä¹‹é—´çš„éšæœºæ•°ï¼ˆæ¨¡æ‹Ÿéª°å­ï¼‰"),
        ("æŠ½å¥–å·ç ", "ç”Ÿæˆä¸€ä¸ª 1 åˆ° 1000 ä¹‹é—´çš„éšæœºæ•°ï¼ˆæ¨¡æ‹ŸæŠ½å¥–ï¼‰")
    ]
    
    for name, description in random_examples:
        print(f"\nğŸ”¸ {name}")
        result = langchain_client.chat(description)
        print(f"   ç»“æœ: {result['output'][:100]}...")
    
    # è®¡ç®—å·¥å…·æ€»ç»“
    print("\nğŸ’¡ è®¡ç®—å·¥å…·ä½¿ç”¨è¦ç‚¹ï¼š")
    print("   â€¢ calculate: æ”¯æŒåŸºç¡€æ•°å­¦è¿ç®—ï¼Œæ³¨æ„å®‰å…¨é™åˆ¶")
    print("   â€¢ get_random_number: å¯æŒ‡å®šèŒƒå›´ï¼Œé€‚åˆæ¨¡æ‹Ÿå’ŒæŠ½æ ·")
    print("   â€¢ ç»„åˆä½¿ç”¨: å¯ä»¥å…ˆç”Ÿæˆéšæœºæ•°ï¼Œå†è¿›è¡Œè®¡ç®—")


def demo_time_tools():
    """æ¼”ç¤ºæ—¶é—´å·¥å…·"""
    
    print("\n" + "="*60)
    print("â° æ—¶é—´å·¥å…·æ¼”ç¤º")
    print("="*60)
    
    print("\nğŸ”§ å·¥å…· 1: get_current_time - è·å–å½“å‰æ—¶é—´")
    print("-" * 40)
    
    # ä¸åŒæ ¼å¼çš„æ—¶é—´è·å–
    time_formats = [
        ("é»˜è®¤æ ¼å¼", "è·å–å½“å‰æ—¶é—´"),
        ("æ—¥æœŸæ ¼å¼", "è·å–å½“å‰æ—¶é—´ï¼Œæ ¼å¼ä¸º å¹´-æœˆ-æ—¥"),
        ("æ—¶é—´æ ¼å¼", "è·å–å½“å‰æ—¶é—´ï¼Œæ ¼å¼ä¸º æ—¶:åˆ†:ç§’"),
        ("å®Œæ•´æ ¼å¼", "è·å–å½“å‰æ—¶é—´ï¼ŒåŒ…å«å¹´æœˆæ—¥æ—¶åˆ†ç§’"),
        ("ä¸­æ–‡æ ¼å¼", "è·å–å½“å‰æ—¶é—´ï¼Œä½¿ç”¨ä¸­æ–‡æ ¼å¼")
    ]
    
    for name, description in time_formats:
        print(f"\nğŸ”¸ {name}")
        result = langchain_client.chat(description)
        print(f"   ç»“æœ: {result['output'][:150]}...")
    
    print("\nğŸ”§ å·¥å…· 2: format_timestamp - æ—¶é—´æˆ³æ ¼å¼åŒ–")
    print("-" * 40)
    
    # ä¸åŒæ—¶é—´æˆ³çš„æ ¼å¼åŒ–
    timestamps = [
        (1640995200, "2022å¹´æ–°å¹´æ—¶é—´æˆ³"),
        (1672531200, "2023å¹´æ–°å¹´æ—¶é—´æˆ³"),
        (1704067200, "2024å¹´æ–°å¹´æ—¶é—´æˆ³"),
        (int(time.time()), "å½“å‰æ—¶é—´æˆ³")
    ]
    
    for timestamp, description in timestamps:
        print(f"\nğŸ”¸ æ ¼å¼åŒ– {description}")
        result = langchain_client.chat(
            f"è¯·å°†æ—¶é—´æˆ³ {timestamp} æ ¼å¼åŒ–ä¸ºå¯è¯»çš„æ—¶é—´"
        )
        print(f"   ç»“æœ: {result['output'][:150]}...")
    
    # æ—¶é—´è®¡ç®—ç¤ºä¾‹
    print("\nğŸ”¸ æ—¶é—´åº”ç”¨ç¤ºä¾‹")
    time_applications = [
        "è·å–å½“å‰æ—¶é—´ï¼Œå¹¶è®¡ç®—è·ç¦»2024å¹´1æœˆ1æ—¥å·²ç»è¿‡å»å¤šå°‘å¤©",
        "è·å–å½“å‰æ—¶é—´ï¼Œå¹¶è¯´æ˜ç°åœ¨æ˜¯æ˜ŸæœŸå‡ ",
        "è·å–å½“å‰æ—¶é—´ï¼Œå¹¶åˆ¤æ–­ç°åœ¨æ˜¯ä¸Šåˆè¿˜æ˜¯ä¸‹åˆ"
    ]
    
    for i, application in enumerate(time_applications, 1):
        print(f"\n   åº”ç”¨ {i}:")
        result = langchain_client.chat(application)
        print(f"   ç»“æœ: {result['output'][:150]}...")
    
    # æ—¶é—´å·¥å…·æ€»ç»“
    print("\nğŸ’¡ æ—¶é—´å·¥å…·ä½¿ç”¨è¦ç‚¹ï¼š")
    print("   â€¢ get_current_time: æ”¯æŒå¤šç§æ ¼å¼ï¼ŒåŒ…å«è¯¦ç»†æ—¶é—´ä¿¡æ¯")
    print("   â€¢ format_timestamp: å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºäººç±»å¯è¯»æ ¼å¼")
    print("   â€¢ ç»„åˆåº”ç”¨: å¯ä¸å…¶ä»–å·¥å…·ç»“åˆåšæ—¶é—´ç›¸å…³è®¡ç®—")


def demo_tool_combinations():
    """æ¼”ç¤ºå·¥å…·ç»„åˆä½¿ç”¨"""
    
    print("\n" + "="*60)
    print("ğŸ”— å·¥å…·ç»„åˆä½¿ç”¨æ¼”ç¤º")
    print("="*60)
    
    print("\nğŸ¯ ç»„åˆåœºæ™¯ 1ï¼šæ•°æ®è®°å½•å’Œåˆ†æ")
    print("-" * 50)
    
    # åœºæ™¯ï¼šè®°å½•å®éªŒæ•°æ®å¹¶åˆ†æ
    print("ğŸ”¸ æ­¥éª¤ 1ï¼šç”Ÿæˆå®éªŒæ•°æ®")
    result = langchain_client.chat(
        "ç”Ÿæˆ3ä¸ª1-100ä¹‹é—´çš„éšæœºæ•°ï¼Œä»£è¡¨ä¸‰æ¬¡å®éªŒçš„ç»“æœ"
    )
    print(f"å®éªŒæ•°æ®ç”Ÿæˆ: {result['output'][:100]}...")
    
    print("\nğŸ”¸ æ­¥éª¤ 2ï¼šè®¡ç®—æ•°æ®ç»Ÿè®¡")
    # å‡è®¾ç”Ÿæˆçš„éšæœºæ•°æ˜¯ 45, 67, 89ï¼ˆå®é™…ä¼šä¸åŒï¼‰
    result = langchain_client.chat(
        "è®¡ç®—ä¸‰ä¸ªæ•° 45, 67, 89 çš„å¹³å‡å€¼ï¼š(45 + 67 + 89) / 3"
    )
    print(f"ç»Ÿè®¡è®¡ç®—: {result['output'][:100]}...")
    
    print("\nğŸ”¸ æ­¥éª¤ 3ï¼šè®°å½•åˆ†æç»“æœ")
    current_time = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    result = langchain_client.chat(
        f"åˆ›å»ºæ–‡ä»¶ experiment_log.txtï¼Œå†…å®¹åŒ…å«ï¼š\n"
        f"å®éªŒæ—¶é—´ï¼š{current_time}\n"
        f"å®éªŒæ•°æ®ï¼šä¸‰æ¬¡æµ‹é‡ç»“æœ\n"
        f"ç»Ÿè®¡åˆ†æï¼šå¹³å‡å€¼è®¡ç®—\n"
        f"å®éªŒç»“è®ºï¼šæ•°æ®åˆ†æå®Œæˆ"
    )
    print(f"ç»“æœè®°å½•: {result['output'][:100]}...")
    
    print("\nğŸ¯ ç»„åˆåœºæ™¯ 2ï¼šè‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ")
    print("-" * 50)
    
    # åœºæ™¯ï¼šç”Ÿæˆæ¯æ—¥å·¥ä½œæŠ¥å‘Š
    print("ğŸ”¸ æ­¥éª¤ 1ï¼šè·å–å½“å‰æ—¶é—´")
    result = langchain_client.chat("è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´")
    print(f"æ—¶é—´è·å–: {result['output'][:100]}...")
    
    print("\nğŸ”¸ æ­¥éª¤ 2ï¼šè®¡ç®—å·¥ä½œç»Ÿè®¡")
    result = langchain_client.chat(
        "è®¡ç®—ä»Šæ—¥å·¥ä½œç»Ÿè®¡ï¼šå®Œæˆä»»åŠ¡8ä¸ªï¼Œå‰©ä½™ä»»åŠ¡2ä¸ªï¼Œå®Œæˆç‡ä¸º 8/(8+2)*100"
    )
    print(f"ç»Ÿè®¡è®¡ç®—: {result['output'][:100]}...")
    
    print("\nğŸ”¸ æ­¥éª¤ 3ï¼šç”ŸæˆæŠ¥å‘Šæ–‡ä»¶")
    result = langchain_client.chat(
        "åˆ›å»ºæ¯æ—¥æŠ¥å‘Šæ–‡ä»¶ daily_report.txtï¼ŒåŒ…å«ï¼š\n"
        "- æŠ¥å‘Šæ—¥æœŸ\n"
        "- å®Œæˆä»»åŠ¡æ•°é‡\n"
        "- å‰©ä½™ä»»åŠ¡æ•°é‡\n"
        "- å®Œæˆç‡ç»Ÿè®¡\n"
        "- æ˜æ—¥è®¡åˆ’"
    )
    print(f"æŠ¥å‘Šç”Ÿæˆ: {result['output'][:100]}...")
    
    print("\nğŸ¯ ç»„åˆåœºæ™¯ 3ï¼šé…ç½®æ–‡ä»¶ç®¡ç†")
    print("-" * 50)
    
    # åœºæ™¯ï¼šåŠ¨æ€ç”Ÿæˆé…ç½®æ–‡ä»¶
    print("ğŸ”¸ æ­¥éª¤ 1ï¼šç”Ÿæˆéšæœºç«¯å£å·")
    result = langchain_client.chat(
        "ç”Ÿæˆä¸€ä¸ª8000åˆ°9999ä¹‹é—´çš„éšæœºæ•°ï¼Œä½œä¸ºæœåŠ¡å™¨ç«¯å£å·"
    )
    print(f"ç«¯å£ç”Ÿæˆ: {result['output'][:100]}...")
    
    print("\nğŸ”¸ æ­¥éª¤ 2ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶")
    result = langchain_client.chat(
        "åˆ›å»ºé…ç½®æ–‡ä»¶ server_config.jsonï¼ŒåŒ…å«éšæœºç”Ÿæˆçš„ç«¯å£å·å’Œå½“å‰æ—¶é—´æˆ³"
    )
    print(f"é…ç½®åˆ›å»º: {result['output'][:100]}...")
    
    print("\nğŸ”¸ æ­¥éª¤ 3ï¼šéªŒè¯é…ç½®æ–‡ä»¶")
    result = langchain_client.chat(
        "è¯»å– server_config.json æ–‡ä»¶å†…å®¹ï¼ŒéªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®"
    )
    print(f"é…ç½®éªŒè¯: {result['output'][:100]}...")
    
    # ç»„åˆä½¿ç”¨æ€»ç»“
    print("\nğŸ’¡ å·¥å…·ç»„åˆä½¿ç”¨è¦ç‚¹ï¼š")
    print("   â€¢ æ•°æ®æµ: ä¸€ä¸ªå·¥å…·çš„è¾“å‡ºå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå·¥å…·çš„è¾“å…¥")
    print("   â€¢ çŠ¶æ€ä¿æŒ: åœ¨å¯¹è¯ä¸­ä¿æŒä¸Šä¸‹æ–‡ï¼Œå¼•ç”¨ä¹‹å‰çš„ç»“æœ")
    print("   â€¢ é”™è¯¯å¤„ç†: å½“ä¸€ä¸ªæ­¥éª¤å¤±è´¥æ—¶ï¼Œå¯ä»¥è°ƒæ•´åç»­æ­¥éª¤")
    print("   â€¢ è‡ªåŠ¨åŒ–: å¯ä»¥æ„å»ºå¤æ‚çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ")


def demo_best_practices():
    """æ¼”ç¤ºæœ€ä½³å®è·µ"""
    
    print("\n" + "="*60)
    print("â­ å·¥å…·ä½¿ç”¨æœ€ä½³å®è·µ")
    print("="*60)
    
    print("\nğŸ“‹ æœ€ä½³å®è·µ 1ï¼šæ¸…æ™°çš„æŒ‡ä»¤")
    print("-" * 40)
    
    # å¯¹æ¯”å¥½çš„å’Œä¸å¥½çš„æŒ‡ä»¤
    examples = [
        {
            "ç±»å‹": "æ–‡ä»¶æ“ä½œ",
            "ä¸å¥½çš„": "åˆ›å»ºæ–‡ä»¶",
            "å¥½çš„": "è¯·åˆ›å»ºä¸€ä¸ªåä¸º example.txt çš„æ–‡ä»¶ï¼Œå†…å®¹æ˜¯ 'Hello World'",
            "è¯´æ˜": "æ˜ç¡®æŒ‡å®šæ–‡ä»¶åå’Œå†…å®¹"
        },
        {
            "ç±»å‹": "è®¡ç®—",
            "ä¸å¥½çš„": "ç®—ä¸€ä¸‹", 
            "å¥½çš„": "è¯·è®¡ç®— 25 + 30 * 2 çš„ç»“æœ",
            "è¯´æ˜": "æä¾›å®Œæ•´çš„æ•°å­¦è¡¨è¾¾å¼"
        },
        {
            "ç±»å‹": "æ—¶é—´",
            "ä¸å¥½çš„": "ç°åœ¨å‡ ç‚¹",
            "å¥½çš„": "è¯·è·å–å½“å‰æ—¶é—´ï¼Œæ ¼å¼ä¸º å¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’",
            "è¯´æ˜": "æŒ‡å®šéœ€è¦çš„æ—¶é—´æ ¼å¼"
        }
    ]
    
    for example in examples:
        print(f"\nğŸ”¸ {example['ç±»å‹']}æ“ä½œ:")
        print(f"   âŒ ä¸å¥½çš„æŒ‡ä»¤: {example['ä¸å¥½çš„']}")
        print(f"   âœ… å¥½çš„æŒ‡ä»¤: {example['å¥½çš„']}")
        print(f"   ğŸ’¡ è¯´æ˜: {example['è¯´æ˜']}")
    
    print("\nğŸ“‹ æœ€ä½³å®è·µ 2ï¼šé”™è¯¯å¤„ç†")
    print("-" * 40)
    
    # æ¼”ç¤ºé”™è¯¯å¤„ç†ç­–ç•¥
    print("ğŸ”¸ ç­–ç•¥ 1ï¼šé¢„æ£€æŸ¥")
    result = langchain_client.chat(
        "åœ¨åˆ›å»ºæ–‡ä»¶ä¹‹å‰ï¼Œå…ˆåˆ—å‡ºç›®å½•å†…å®¹ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰åŒåæ–‡ä»¶"
    )
    print(f"é¢„æ£€æŸ¥ç»“æœ: {result['output'][:100]}...")
    
    print("\nğŸ”¸ ç­–ç•¥ 2ï¼šå¤‡é€‰æ–¹æ¡ˆ")
    print("å¦‚æœä¸»è¦æ“ä½œå¤±è´¥ï¼Œæä¾›å¤‡é€‰æ–¹æ¡ˆ")
    result = langchain_client.chat(
        "å¦‚æœæ— æ³•åˆ›å»º test.txt æ–‡ä»¶ï¼Œé‚£ä¹ˆåˆ›å»º backup.txt æ–‡ä»¶ä½œä¸ºæ›¿ä»£"
    )
    print(f"å¤‡é€‰æ–¹æ¡ˆ: {result['output'][:100]}...")
    
    print("\nğŸ“‹ æœ€ä½³å®è·µ 3ï¼šæ€§èƒ½ä¼˜åŒ–")
    print("-" * 40)
    
    optimization_tips = [
        "æ‰¹é‡æ“ä½œï¼šä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªç›¸ä¼¼ä»»åŠ¡",
        "ç»“æœç¼“å­˜ï¼šé¿å…é‡å¤è®¡ç®—ç›¸åŒçš„è¡¨è¾¾å¼",
        "ç®€åŒ–è¯·æ±‚ï¼šä½¿ç”¨ç®€æ´æ˜ç¡®çš„æŒ‡ä»¤",
        "åˆ†æ­¥æ‰§è¡Œï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºç®€å•æ­¥éª¤"
    ]
    
    for i, tip in enumerate(optimization_tips, 1):
        print(f"   {i}. {tip}")
    
    print("\nğŸ“‹ æœ€ä½³å®è·µ 4ï¼šå®‰å…¨è€ƒè™‘")
    print("-" * 40)
    
    security_notes = [
        "æ–‡ä»¶æ“ä½œï¼šåªåœ¨æŒ‡å®šçš„å·¥ä½œç›®å½•å†…æ“ä½œ",
        "è®¡ç®—å®‰å…¨ï¼šé¿å…ä½¿ç”¨å±é™©çš„æ•°å­¦è¡¨è¾¾å¼",
        "æ•°æ®éªŒè¯ï¼šæ£€æŸ¥è¾“å…¥æ•°æ®çš„åˆç†æ€§",
        "æƒé™æ§åˆ¶ï¼šç†è§£å·¥å…·çš„æƒé™é™åˆ¶"
    ]
    
    for i, note in enumerate(security_notes, 1):
        print(f"   {i}. {note}")
    
    # æœ€ä½³å®è·µæ€»ç»“
    print("\nğŸ’¡ æ€»ç»“:")
    print("   â€¢ æ¸…æ™°æŒ‡ä»¤ = æ›´å¥½ç»“æœ")
    print("   â€¢ é”™è¯¯å¤„ç† = æ›´ç¨³å®šç³»ç»Ÿ")
    print("   â€¢ æ€§èƒ½ä¼˜åŒ– = æ›´å¿«å“åº”")
    print("   â€¢ å®‰å…¨æ„è¯† = æ›´å¯é è¿è¡Œ")


def main():
    """ä¸»å‡½æ•°ï¼šè¿è¡Œæ‰€æœ‰å·¥å…·ä½¿ç”¨ç¤ºä¾‹"""
    
    print("ğŸš€ MCP å·¥å…·ä½¿ç”¨è¯¦ç»†ç¤ºä¾‹")
    print("="*60)
    print("ğŸ¯ è¿™ä¸ªç¤ºä¾‹å°†è¯¦ç»†å±•ç¤ºæ¯ä¸ªå·¥å…·çš„ä½¿ç”¨æ–¹æ³•")
    print("ğŸ“š åŒ…æ‹¬åŸºç¡€ç”¨æ³•ã€è¿›é˜¶æŠ€å·§å’Œæœ€ä½³å®è·µ")
    print("="*60)
    
    try:
        # æ¼”ç¤ºå„ç±»å·¥å…·
        demo_file_tools()
        demo_calculation_tools()
        demo_time_tools()
        
        # æ¼”ç¤ºå·¥å…·ç»„åˆ
        demo_tool_combinations()
        
        # æ¼”ç¤ºæœ€ä½³å®è·µ
        demo_best_practices()
        
        # æœ€ç»ˆç»Ÿè®¡å’Œå»ºè®®
        print("\n" + "="*60)
        print("ğŸ“Š å·¥å…·ä½¿ç”¨ç¤ºä¾‹æ€»ç»“")
        print("="*60)
        
        final_stats = langchain_client.get_usage_stats()
        print(f"æœ¬æ¬¡æ¼”ç¤ºå·¥å…·è°ƒç”¨æ€»æ•°: {final_stats['total_calls']}")
        
        print("\nğŸ“ å­¦ä¹ æˆæœ:")
        print("   âœ… æŒæ¡äº†æ‰€æœ‰åŸºç¡€å·¥å…·çš„ä½¿ç”¨æ–¹æ³•")
        print("   âœ… äº†è§£äº†å·¥å…·å‚æ•°å’Œé…ç½®é€‰é¡¹")
        print("   âœ… å­¦ä¼šäº†å·¥å…·ç»„åˆä½¿ç”¨æŠ€å·§")
        print("   âœ… ç†è§£äº†æœ€ä½³å®è·µå’Œå®‰å…¨è€ƒè™‘")
        
        print("\nğŸ”„ ä¸‹ä¸€æ­¥å»ºè®®:")
        print("   â€¢ å°è¯•åˆ›å»ºè‡ªå·±çš„å·¥å…·ç»„åˆ")
        print("   â€¢ æ¢ç´¢æ›´å¤æ‚çš„å·¥ä½œæµåœºæ™¯")
        print("   â€¢ å­¦ä¹ æ·»åŠ è‡ªå®šä¹‰å·¥å…·")
        print("   â€¢ å‚ä¸é¡¹ç›®å¼€å‘å’Œæ”¹è¿›")
        
        print("\nğŸ“ åˆ›å»ºçš„æ¼”ç¤ºæ–‡ä»¶:")
        result = langchain_client.chat("åˆ—å‡ºæ‰€æœ‰ä»¥ demo_ å¼€å¤´çš„æ–‡ä»¶")
        print("è¯·æŸ¥çœ‹å·¥ä½œç›®å½•ä¸­çš„æ¼”ç¤ºæ–‡ä»¶ä»¥äº†è§£å…·ä½“æ•ˆæœ")
        
    except Exception as e:
        print(f"\nâŒ å·¥å…·æ¼”ç¤ºå¤±è´¥: {str(e)}")
        print("ğŸ’¡ è¯·æ£€æŸ¥ç³»ç»Ÿé…ç½®å’Œç½‘ç»œè¿æ¥")


if __name__ == "__main__":
    main()
